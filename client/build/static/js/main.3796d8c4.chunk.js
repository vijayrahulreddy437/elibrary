(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(257)},129:function(e,t,a){},156:function(e,t,a){},165:function(e,t){},167:function(e,t){},197:function(e,t){},198:function(e,t){},257:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(118),s=a.n(o),l=(a(129),a(4)),i=a(5),c=a(7),m=a(6),u=a(8),p=a(262),d=a(260),h=a(264),b=a(45),v=a.n(b),f=a(14),E=a.n(f),g=function(e){e?E.a.defaults.headers.common.Authorization=e:delete E.a.defaults.headers.common.Authorization},y=a(38),N=function(){return function(e){E.a.get("/api/users/books").then(function(e){return console.log(e.data),e.data}).catch(function(t){return e({type:"GET_ERRORS",payload:t.response.data})})}},w=function(e){return{type:"SET_CURRENT_USER",payload:e}},O=function(e,t){return function(t){console.log(e),localStorage.removeItem("jwtToken"),g(!1),t(w({})),(new y.a).set("ebook",null,{path:"/"}),E.a.post("/api/users/logout",e).then(function(e){}).catch(function(e){console.log(e),t({type:"GET_ERRORS",payload:e.response.data})})}},k=a(11),j=a(23),x=a(121),C=a(70),S=a(154),R={isAuthenticated:!1,user:{},loading:!1},_={},L=Object(j.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(C.a)({},e,{isAuthenticated:!S(t.payload),user:t.payload});case"USER_LOADING":return Object(C.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),T=[x.a],B=Object(j.e)(L,{},Object(j.d)(j.a.apply(void 0,T),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()||j.d)),A=a(259),D=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper teal"},r.a.createElement(A.a,{to:"/",style:{fontFamily:"clibri"},className:"col s5 brand-logo left black-text"},"E-Library"))))}}]),t}(n.Component),U=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper white"},r.a.createElement(A.a,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large right waves-effect waves-light hoverable blue accent-3"},"Log In"))))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={books:[],errors:{}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("/api/users/books").then(function(t){console.log(t.data),e.setState({books:t.data})}).catch()}},{key:"render",value:function(){var e=this.state.books.map(function(e,t){return r.a.createElement("div",{className:"list-group-item"},r.a.createElement("h5",{className:"list-group-item-heading"},"Book Name : ",e.name),r.a.createElement("p",{className:"list-group-item-text"},r.a.createElement("b",null,"Description")," : ",e.description),r.a.createElement("p",{className:"list-group-item-text"},r.a.createElement("b",null,"Book Available : ")," : ",e.availability))});return r.a.createElement("div",{id:"layout-content",className:""},r.a.createElement("div",{className:"list-group"},e))}}]),t}(n.Component),I=Object(k.b)(function(e){return{books:e.books}},{listBooks:N})(F),z=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h4",null,"List of Books Available in Library"),r.a.createElement("br",null),r.a.createElement(I,null))))}}]),t}(n.Component),G=a(27),P=a(263),M=a(21),V=a.n(M),W=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/userhome")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container grey lighten-2 z-depth-5",style:{border:"1px solid"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(A.a,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below")),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:V()("",{invalid:e.name})}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("span",{className:"red-text"},e.name)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:V()("",{invalid:e.email})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:V()("",{invalid:e.password})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:V()("",{invalid:e.password2})}),r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("span",{className:"red-text"},e.password2)),r.a.createElement("div",{className:"col s12 center",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable teal"},"Sign up"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(A.a,{to:"/login"},"Log in")))))))}}]),t}(n.Component),X=Object(k.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){E.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(P.a)(W)),H=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/userhome")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/userhome"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container grey lighten-2  z-depth-5",style:{border:"1px solid"}},r.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(A.a,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Log In"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:V()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:V()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"col s12 center",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable teal center"},"Login"),r.a.createElement("p",{className:"grey-text text-darken-1"},"New Here? ",r.a.createElement(A.a,{to:"/register"},"Click Here")," to Register for adding and deleting Books."))))))}}]),t}(n.Component),J=Object(k.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){E.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),g(a);var n=v()(a);(new y.a).set("ebook",e.data.token,{path:"/"}),t(w(n))}).catch(function(e){console.log(e),t({type:"GET_ERRORS",payload:e.response.data})})}}})(H),$=a(123),q=a(261),K=Object(k.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object($.a)(e,["component","auth"]);return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(q.a,{to:"/login"})}}))}),Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser(a.props.auth.user)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.props.auth.user;return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper  teal lighten-2"},r.a.createElement(A.a,{to:"/userhome",style:{width:"140px",borderRadius:"0px",letterSpacing:"1.5px",marginLeft:"10px",height:"100%"},className:"btn btn-primary hoverable grey darken-1 "},"UserHome"),r.a.createElement(A.a,{to:"/createbook",style:{width:"",borderRadius:"0px",letterSpacing:"1.5px",marginLeft:"10px",height:"100%"},className:"btn btn-primary hoverable grey darken-1"},"Create Book Entry"),r.a.createElement("button",{style:{width:"150px",borderRadius:"0px",letterSpacing:"1.5px",display:"inline-grid",marginLeft:"10px",height:"100%"},onClick:this.onLogoutClick,className:"btn btn-primary hoverable grey darken-1"},"Logout"))))}}]),t}(n.Component),Y=Object(k.b)(function(e){return{auth:e.auth}},{logoutUser:O})(Q),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleAnchorClick=function(e){console.log(e.target.id);var t={id:e.target.id};a.props.deleteBook(t,a.props.history)},a.state={books:[],bookId:0,errors:{}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("/api/users/books").then(function(t){console.log(t.data),e.setState({books:t.data})}).catch()}},{key:"render",value:function(){var e=this,t=this.state.books.map(function(t,a){return r.a.createElement("div",{className:"list-group-item"},r.a.createElement("h5",{className:"list-group-item-heading"},"Book Name : ",t.name),r.a.createElement("p",{className:"list-group-item-text"},r.a.createElement("b",null,"Description")," : ",t.description),r.a.createElement("p",{className:"list-group-item-text"},r.a.createElement("b",null,"Book Available : ")," : ",t.availability),r.a.createElement("a",{href:"#",className:"btn btn-primary",id:t._id,value:t._id,onClick:e.handleAnchorClick},"Delete"))});return r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement("div",{id:"layout-content",className:"container"},r.a.createElement("div",{className:"list-group"},t)))}}]),t}(n.Component),ee=Object(k.b)(function(e){return{books:e.books}},{listBooks:N,deleteBook:function(e,t){return function(a){console.log(e),E.a.delete("/api/users/book",{data:e}).then(function(e){console.log(e),t.push("/userhome")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Z),te=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ee,null))}}]),t}(n.Component),ae=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,description:e.state.description,availability:e.state.availability};e.props.createBook(a,e.props.history)},e.state={name:"",description:"",availability:"",errors:{}},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/createbook")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2 z-depth-5 ",style:{padding:"10px",border:"1px solid"}},r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,"Create New Book Item              ")),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:V()("",{invalid:e.name})}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("span",{className:"red-text"},e.name)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.description,error:e.description,id:"description",type:"text",className:V()("",{invalid:e.description})}),r.a.createElement("label",{htmlFor:"email"},"Description"),r.a.createElement("span",{className:"red-text"},e.description)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.availability,error:e.availability,id:"availability",type:"text",className:V()("",{invalid:e.availability})}),r.a.createElement("label",{htmlFor:"availability"},"Avaliability"),r.a.createElement("span",{className:"red-text"},e.availability)),r.a.createElement("div",{className:"col s12 center",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable teal"},"Create New Book Entry")))))))}}]),t}(n.Component),ne=Object(k.b)(function(e){return{auth:e.auth,errors:e.errors}},{createBook:function(e,t){return function(a){E.a.post("/api/users/book",e).then(function(e){return t.push("/listbook")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(P.a)(ae)),re=(a(156),a(158),new y.a);if(re.get("ebook"),re.get("ebook"))if("null"!=re.get("ebook")){console.log(re.get("ebook"));var oe=re.get("ebook").replace("Bearer ","");g(oe);var se=v()(oe);B.dispatch(w(se));var le=Date.now()/1e3;se.exp<le&&(B.dispatch(O()),window.location.href="./login")}else re.remove("ebook"),window.location.href="./login";var ie=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,{store:B},r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(D,null),r.a.createElement(d.a,{exact:!0,path:"/",component:z}),r.a.createElement(d.a,{exact:!0,path:"/register",component:X}),r.a.createElement(d.a,{exact:!0,path:"/login",component:J}),r.a.createElement(h.a,null,r.a.createElement(d.a,{exact:!0,path:"/listbook",component:ee}),r.a.createElement(K,{exact:!0,path:"/userhome",component:te}),r.a.createElement(K,{exact:!0,path:"/createbook",component:ne})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,2,1]]]);
//# sourceMappingURL=main.3796d8c4.chunk.js.map